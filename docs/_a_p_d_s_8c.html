<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 507 Portfolio: Src/APDS.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME 507 Portfolio
   </div>
   <div id="projectbrief">Hungry Hungry Hippo Robot</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_413f4e031a85da0d68269c6fd2f76e1c.html">Src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">APDS.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file provides the functionality to use an APDS9960 sensor for its color and proximity purposes.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_a_p_d_s_8h_source.html">APDS.h</a>&quot;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a11fa06833127f55ec0e1a816c6caac6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_a_p_d_s_type.html">APDS_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a_p_d_s_8c.html#a11fa06833127f55ec0e1a816c6caac6e">APDS9960_Init</a> (I2C_HandleTypeDef *hi2c, uint8_t int_time, uint8_t gain)</td></tr>
<tr class="memdesc:a11fa06833127f55ec0e1a816c6caac6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">APDS9960 Object initialization function. This function configures an APDS struct to include all pertinent information for gathering data from the sensor such as the ADC integration time and the sensor output's gain value.  <br /></td></tr>
<tr class="separator:a11fa06833127f55ec0e1a816c6caac6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea9c3e17396e0bccbec24032fc3b77b7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_a_p_d_s_type.html">APDS_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a_p_d_s_8c.html#aea9c3e17396e0bccbec24032fc3b77b7">APDS9960_ReadColorData</a> (<a class="el" href="struct_a_p_d_s_type.html">APDS_t</a> myAPDS)</td></tr>
<tr class="memdesc:aea9c3e17396e0bccbec24032fc3b77b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">APDS9960 Main color reading function. This function accesses the APDS's memory registers to extract the red, green, and blue color values of what is in front of it.  <br /></td></tr>
<tr class="separator:aea9c3e17396e0bccbec24032fc3b77b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c656f441e7d4a65df7934fb13e7ce22"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_a_p_d_s_type.html">APDS_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a_p_d_s_8c.html#a7c656f441e7d4a65df7934fb13e7ce22">APDS9960_AdjustData</a> (<a class="el" href="struct_a_p_d_s_type.html">APDS_t</a> myAPDS)</td></tr>
<tr class="memdesc:a7c656f441e7d4a65df7934fb13e7ce22"><td class="mdescLeft">&#160;</td><td class="mdescRight">APDS9960 Data adjustment function. This function takes the APDS's current color values and adjusts them to the standard scale (0xFF maximum). A byproduct of this normalization is that the highest color value present becomes 0xFF. This makes it impossible to read dark colors but works well for bright colors.  <br /></td></tr>
<tr class="separator:a7c656f441e7d4a65df7934fb13e7ce22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a583044343212ddc9f42e0c6a23f735b3"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a_p_d_s_8c.html#a583044343212ddc9f42e0c6a23f735b3">APDS9960_Color</a> (<a class="el" href="struct_a_p_d_s_type.html">APDS_t</a> myAPDS)</td></tr>
<tr class="memdesc:a583044343212ddc9f42e0c6a23f735b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">APDS9960 Color detection function. This function utilizes the ReadColorData() and AdjustData() functions in order to determine what color it is looking at. These colors are limited to red, green, blue, and yellow. These colors have been assigned values 0-3, respectively. If it cannot determine if it's looking at a color it will return 4.  <br /></td></tr>
<tr class="separator:a583044343212ddc9f42e0c6a23f735b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dd074f033805ac028977c2adcc6e4a9"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_a_p_d_s_8c.html#a2dd074f033805ac028977c2adcc6e4a9">APDS9960_Prox</a> (<a class="el" href="struct_a_p_d_s_type.html">APDS_t</a> myAPDS)</td></tr>
<tr class="memdesc:a2dd074f033805ac028977c2adcc6e4a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">APDS9960 Proximity detection function. This function accesses the APDS's proximity register and returns the value. Note: the proximity data ranges from 0x00 to 0xFF, with 0xFF being the shortest distance.  <br /></td></tr>
<tr class="separator:a2dd074f033805ac028977c2adcc6e4a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file provides the functionality to use an APDS9960 sensor for its color and proximity purposes. </p>
<dl class="section author"><dt>Author</dt><dd>Sean Wahl </dd></dl>
<dl class="section date"><dt>Date</dt><dd>June 14, 2023 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a7c656f441e7d4a65df7934fb13e7ce22" name="a7c656f441e7d4a65df7934fb13e7ce22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c656f441e7d4a65df7934fb13e7ce22">&#9670;&#160;</a></span>APDS9960_AdjustData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_a_p_d_s_type.html">APDS_t</a> APDS9960_AdjustData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_a_p_d_s_type.html">APDS_t</a>&#160;</td>
          <td class="paramname"><em>myAPDS</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>APDS9960 Data adjustment function. This function takes the APDS's current color values and adjusts them to the standard scale (0xFF maximum). A byproduct of this normalization is that the highest color value present becomes 0xFF. This makes it impossible to read dark colors but works well for bright colors. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">myAPDS</td><td>APDS9960 struct type </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Returns</td><td>the APDS struct back, now with the adjusted RGB data to be accessed from its fields </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a583044343212ddc9f42e0c6a23f735b3" name="a583044343212ddc9f42e0c6a23f735b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a583044343212ddc9f42e0c6a23f735b3">&#9670;&#160;</a></span>APDS9960_Color()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t APDS9960_Color </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_a_p_d_s_type.html">APDS_t</a>&#160;</td>
          <td class="paramname"><em>myAPDS</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>APDS9960 Color detection function. This function utilizes the ReadColorData() and AdjustData() functions in order to determine what color it is looking at. These colors are limited to red, green, blue, and yellow. These colors have been assigned values 0-3, respectively. If it cannot determine if it's looking at a color it will return 4. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">myAPDS</td><td>APDS9960 struct type </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Returns</td><td>the number associated with the color sensed (RBGY - 0123) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a11fa06833127f55ec0e1a816c6caac6e" name="a11fa06833127f55ec0e1a816c6caac6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11fa06833127f55ec0e1a816c6caac6e">&#9670;&#160;</a></span>APDS9960_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_a_p_d_s_type.html">APDS_t</a> APDS9960_Init </td>
          <td>(</td>
          <td class="paramtype">I2C_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>hi2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>int_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>gain</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>APDS9960 Object initialization function. This function configures an APDS struct to include all pertinent information for gathering data from the sensor such as the ADC integration time and the sensor output's gain value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hi2c</td><td>I2C handle pointer </td></tr>
    <tr><td class="paramname">int_time</td><td>ADC integration time, see data sheet for specifics but 0xDB is around 100ms </td></tr>
    <tr><td class="paramname">gain</td><td>Sensor output's gain (x1 is the only one calibrated to an 0xFF maximum) </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Returns</td><td>an APDS struct for future command use. <br  />
 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2dd074f033805ac028977c2adcc6e4a9" name="a2dd074f033805ac028977c2adcc6e4a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dd074f033805ac028977c2adcc6e4a9">&#9670;&#160;</a></span>APDS9960_Prox()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t APDS9960_Prox </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_a_p_d_s_type.html">APDS_t</a>&#160;</td>
          <td class="paramname"><em>myAPDS</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>APDS9960 Proximity detection function. This function accesses the APDS's proximity register and returns the value. Note: the proximity data ranges from 0x00 to 0xFF, with 0xFF being the shortest distance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">myAPDS</td><td>APDS9960 struct type </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Returns</td><td>the proximity value from the APDS's register </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aea9c3e17396e0bccbec24032fc3b77b7" name="aea9c3e17396e0bccbec24032fc3b77b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea9c3e17396e0bccbec24032fc3b77b7">&#9670;&#160;</a></span>APDS9960_ReadColorData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_a_p_d_s_type.html">APDS_t</a> APDS9960_ReadColorData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_a_p_d_s_type.html">APDS_t</a>&#160;</td>
          <td class="paramname"><em>myAPDS</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>APDS9960 Main color reading function. This function accesses the APDS's memory registers to extract the red, green, and blue color values of what is in front of it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">myAPDS</td><td>APDS9960 struct type </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Returns</td><td>the APDS struct back, now with the RGB data to be accessed from its fields </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6
</small></address>
</body>
</html>
