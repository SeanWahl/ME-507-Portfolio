\hypertarget{_a_p_d_s_8c}{}\doxysection{Src/\+APDS.c File Reference}
\label{_a_p_d_s_8c}\index{Src/APDS.c@{Src/APDS.c}}


This file provides the functionality to use an APDS9960 sensor for its color and proximity purposes.  


{\ttfamily \#include \char`\"{}APDS.\+h\char`\"{}}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{struct_a_p_d_s_type}{APDS\+\_\+t}} \mbox{\hyperlink{_a_p_d_s_8c_a11fa06833127f55ec0e1a816c6caac6e}{APDS9960\+\_\+\+Init}} (I2\+C\+\_\+\+Handle\+Type\+Def $\ast$hi2c, uint8\+\_\+t int\+\_\+time, uint8\+\_\+t gain)
\begin{DoxyCompactList}\small\item\em APDS9960 Object initialization function. This function configures an APDS struct to include all pertinent information for gathering data from the sensor such as the ADC integration time and the sensor output\textquotesingle{}s gain value. \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct_a_p_d_s_type}{APDS\+\_\+t}} \mbox{\hyperlink{_a_p_d_s_8c_aea9c3e17396e0bccbec24032fc3b77b7}{APDS9960\+\_\+\+Read\+Color\+Data}} (\mbox{\hyperlink{struct_a_p_d_s_type}{APDS\+\_\+t}} my\+APDS)
\begin{DoxyCompactList}\small\item\em APDS9960 Main color reading function. This function accesses the APDS\textquotesingle{}s memory registers to extract the red, green, and blue color values of what is in front of it. \end{DoxyCompactList}\item 
\mbox{\hyperlink{struct_a_p_d_s_type}{APDS\+\_\+t}} \mbox{\hyperlink{_a_p_d_s_8c_a7c656f441e7d4a65df7934fb13e7ce22}{APDS9960\+\_\+\+Adjust\+Data}} (\mbox{\hyperlink{struct_a_p_d_s_type}{APDS\+\_\+t}} my\+APDS)
\begin{DoxyCompactList}\small\item\em APDS9960 Data adjustment function. This function takes the APDS\textquotesingle{}s current color values and adjusts them to the standard scale (0x\+FF maximum). A byproduct of this normalization is that the highest color value present becomes 0x\+FF. This makes it impossible to read dark colors but works well for bright colors. \end{DoxyCompactList}\item 
uint32\+\_\+t \mbox{\hyperlink{_a_p_d_s_8c_a583044343212ddc9f42e0c6a23f735b3}{APDS9960\+\_\+\+Color}} (\mbox{\hyperlink{struct_a_p_d_s_type}{APDS\+\_\+t}} my\+APDS)
\begin{DoxyCompactList}\small\item\em APDS9960 Color detection function. This function utilizes the Read\+Color\+Data() and Adjust\+Data() functions in order to determine what color it is looking at. These colors are limited to red, green, blue, and yellow. These colors have been assigned values 0-\/3, respectively. If it cannot determine if it\textquotesingle{}s looking at a color it will return 4. \end{DoxyCompactList}\item 
uint8\+\_\+t \mbox{\hyperlink{_a_p_d_s_8c_a2dd074f033805ac028977c2adcc6e4a9}{APDS9960\+\_\+\+Prox}} (\mbox{\hyperlink{struct_a_p_d_s_type}{APDS\+\_\+t}} my\+APDS)
\begin{DoxyCompactList}\small\item\em APDS9960 Proximity detection function. This function accesses the APDS\textquotesingle{}s proximity register and returns the value. Note\+: the proximity data ranges from 0x00 to 0x\+FF, with 0x\+FF being the shortest distance. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This file provides the functionality to use an APDS9960 sensor for its color and proximity purposes. 

\begin{DoxyAuthor}{Author}
Sean Wahl 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
June 14, 2023 
\end{DoxyDate}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{_a_p_d_s_8c_a7c656f441e7d4a65df7934fb13e7ce22}\label{_a_p_d_s_8c_a7c656f441e7d4a65df7934fb13e7ce22}} 
\index{APDS.c@{APDS.c}!APDS9960\_AdjustData@{APDS9960\_AdjustData}}
\index{APDS9960\_AdjustData@{APDS9960\_AdjustData}!APDS.c@{APDS.c}}
\doxysubsubsection{\texorpdfstring{APDS9960\_AdjustData()}{APDS9960\_AdjustData()}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_a_p_d_s_type}{APDS\+\_\+t}} APDS9960\+\_\+\+Adjust\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_p_d_s_type}{APDS\+\_\+t}}}]{my\+APDS }\end{DoxyParamCaption})}



APDS9960 Data adjustment function. This function takes the APDS\textquotesingle{}s current color values and adjusts them to the standard scale (0x\+FF maximum). A byproduct of this normalization is that the highest color value present becomes 0x\+FF. This makes it impossible to read dark colors but works well for bright colors. 


\begin{DoxyParams}{Parameters}
{\em my\+APDS} & APDS9960 struct type \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Returns} & the APDS struct back, now with the adjusted RGB data to be accessed from its fields \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{_a_p_d_s_8c_a583044343212ddc9f42e0c6a23f735b3}\label{_a_p_d_s_8c_a583044343212ddc9f42e0c6a23f735b3}} 
\index{APDS.c@{APDS.c}!APDS9960\_Color@{APDS9960\_Color}}
\index{APDS9960\_Color@{APDS9960\_Color}!APDS.c@{APDS.c}}
\doxysubsubsection{\texorpdfstring{APDS9960\_Color()}{APDS9960\_Color()}}
{\footnotesize\ttfamily uint32\+\_\+t APDS9960\+\_\+\+Color (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_p_d_s_type}{APDS\+\_\+t}}}]{my\+APDS }\end{DoxyParamCaption})}



APDS9960 Color detection function. This function utilizes the Read\+Color\+Data() and Adjust\+Data() functions in order to determine what color it is looking at. These colors are limited to red, green, blue, and yellow. These colors have been assigned values 0-\/3, respectively. If it cannot determine if it\textquotesingle{}s looking at a color it will return 4. 


\begin{DoxyParams}{Parameters}
{\em my\+APDS} & APDS9960 struct type \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Returns} & the number associated with the color sensed (RBGY -\/ 0123) \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{_a_p_d_s_8c_a11fa06833127f55ec0e1a816c6caac6e}\label{_a_p_d_s_8c_a11fa06833127f55ec0e1a816c6caac6e}} 
\index{APDS.c@{APDS.c}!APDS9960\_Init@{APDS9960\_Init}}
\index{APDS9960\_Init@{APDS9960\_Init}!APDS.c@{APDS.c}}
\doxysubsubsection{\texorpdfstring{APDS9960\_Init()}{APDS9960\_Init()}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_a_p_d_s_type}{APDS\+\_\+t}} APDS9960\+\_\+\+Init (\begin{DoxyParamCaption}\item[{I2\+C\+\_\+\+Handle\+Type\+Def $\ast$}]{hi2c,  }\item[{uint8\+\_\+t}]{int\+\_\+time,  }\item[{uint8\+\_\+t}]{gain }\end{DoxyParamCaption})}



APDS9960 Object initialization function. This function configures an APDS struct to include all pertinent information for gathering data from the sensor such as the ADC integration time and the sensor output\textquotesingle{}s gain value. 


\begin{DoxyParams}{Parameters}
{\em hi2c} & I2C handle pointer \\
\hline
{\em int\+\_\+time} & ADC integration time, see data sheet for specifics but 0x\+DB is around 100ms \\
\hline
{\em gain} & Sensor output\textquotesingle{}s gain (x1 is the only one calibrated to an 0x\+FF maximum) \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Returns} & an APDS struct for future command use. ~\newline
 \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{_a_p_d_s_8c_a2dd074f033805ac028977c2adcc6e4a9}\label{_a_p_d_s_8c_a2dd074f033805ac028977c2adcc6e4a9}} 
\index{APDS.c@{APDS.c}!APDS9960\_Prox@{APDS9960\_Prox}}
\index{APDS9960\_Prox@{APDS9960\_Prox}!APDS.c@{APDS.c}}
\doxysubsubsection{\texorpdfstring{APDS9960\_Prox()}{APDS9960\_Prox()}}
{\footnotesize\ttfamily uint8\+\_\+t APDS9960\+\_\+\+Prox (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_p_d_s_type}{APDS\+\_\+t}}}]{my\+APDS }\end{DoxyParamCaption})}



APDS9960 Proximity detection function. This function accesses the APDS\textquotesingle{}s proximity register and returns the value. Note\+: the proximity data ranges from 0x00 to 0x\+FF, with 0x\+FF being the shortest distance. 


\begin{DoxyParams}{Parameters}
{\em my\+APDS} & APDS9960 struct type \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Returns} & the proximity value from the APDS\textquotesingle{}s register \\
\hline
\end{DoxyRetVals}
\mbox{\Hypertarget{_a_p_d_s_8c_aea9c3e17396e0bccbec24032fc3b77b7}\label{_a_p_d_s_8c_aea9c3e17396e0bccbec24032fc3b77b7}} 
\index{APDS.c@{APDS.c}!APDS9960\_ReadColorData@{APDS9960\_ReadColorData}}
\index{APDS9960\_ReadColorData@{APDS9960\_ReadColorData}!APDS.c@{APDS.c}}
\doxysubsubsection{\texorpdfstring{APDS9960\_ReadColorData()}{APDS9960\_ReadColorData()}}
{\footnotesize\ttfamily \mbox{\hyperlink{struct_a_p_d_s_type}{APDS\+\_\+t}} APDS9960\+\_\+\+Read\+Color\+Data (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_a_p_d_s_type}{APDS\+\_\+t}}}]{my\+APDS }\end{DoxyParamCaption})}



APDS9960 Main color reading function. This function accesses the APDS\textquotesingle{}s memory registers to extract the red, green, and blue color values of what is in front of it. 


\begin{DoxyParams}{Parameters}
{\em my\+APDS} & APDS9960 struct type \\
\hline
\end{DoxyParams}

\begin{DoxyRetVals}{Return values}
{\em Returns} & the APDS struct back, now with the RGB data to be accessed from its fields \\
\hline
\end{DoxyRetVals}
